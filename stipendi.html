<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calcolatore Stipendio</title>
<style>
  .container { max-width: 650px; margin: auto; }
  :root {
    --bg-gradient: linear-gradient(to right, #0f2027, #203a43, #2c5364);
    --primary: #ffcc00;
    --primary-dark: #e6b800;
    --input-bg: #f1f1f1;
    --input-text: #333;
    --bonus-on: #ffcc00;
    --bonus-off: rgba(255,255,255,0.1);
  }
  * { box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 2rem 1rem;
    margin: 0;
    background: var(--bg-gradient);
    color: #fff;
  }
  h2, h3 { text-align: center; color: var(--primary); }
  input, button, select {
    padding: 0.8rem;
    margin: 0.5rem 0;
    width: 100%;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
  }
  input[type="number"], select { background-color: var(--input-bg); color: var(--input-text); }
  button {
    background-color: var(--primary);
    color: #000;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: block;
    margin: 1rem auto;
    padding: 0.9rem 1.5rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  button:hover { background-color: var(--primary-dark); transform: scale(1.05); }
  label { font-weight: bold; display: block; margin-top: 1rem; }
  .result {
    margin-top: 1.5rem;
    font-weight: bold;
    font-size: 1.3rem;
    text-align: center;
    background-color: rgba(255, 255, 255, 0.1);
    padding: 1rem;
    border-radius: 10px;
  }
  .bonus-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 0.7rem;
    margin-top: 1rem;
    text-align: center;
  }
  .bonus-item {
    padding: 1rem;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    background: var(--bonus-off);
    user-select: none;
  }
  .bonus-item.active {
    background: var(--bonus-on);
    color: #000;
    transform: scale(1.05);
  }
  @media screen and (max-width: 600px) {
    .container { max-width: 100%; }
    .result { font-size: 1.1rem; }
  }
</style>
</head>
<body>
<div class="container">
  <h2>Calcolo Stipendi</h2><label>Seleziona ramo:</label> <select id="ramo" onchange="selezionaRamo()"> <option value="">-- Scegli --</option> <option value="giurisprudenza">Giurisprudenza</option> <option value="secret">Secret Service</option> </select>

  <div id="passaggi" style="display:none;"></div>  <div class="result" id="result" style="display:none;">
    Stipendio Totale: <span id="stipendioTotale">0</span>$
  </div>
</div><script>
// ================== DATI ==================
const stipendiGiurisprudenza = {
  'Assistente Legale': 130000,
  'Avvocato D\'Ufficio': 140000,
  'Avvocato Senior': 150000,
  'Responsabile Avvocati': 160000,
  'Procuratore Aggiunto': 180000,
  'Procuratore Distrettuale': 200000,
  'Procuratore Federale': 220000,
  'Procuratore Generale': 240000,
  'Giudice Distrettuale': 260000,
  'Giudice D\'Appello': 280000,
  'Giudice Federale': 300000,
  'Giudice Supremo': 320000,
  'Governatore': 1000000,
  'Vice Governatore': 900000,
  'Segretario Di Stato': 650000,
  'Consigliere Di Stato': 600000,
  'Segretario Della Giustizia': 550000,
  'Segretario delle Finanze': 550000,
  'Segretario Del Lavoro': 550000,
  'Vice Segretario di Giustizia': 450000,
  'Vice segretario Delle Finanze': 450000,
  'Vice Segretario del Lavoro': 350000,
  'Consigliere Di Giustizia': 350000
};

const bonusVari = {
  'Assistente Governatore': 100000,
  'Responsabile Formatori': 100000,
  'Assistente Direzione': 50000,
  'Formatore': 50000,
  'Esattore Tasse': 50000
};

const stipendiSecret = {
  'Recluta': 200000,
  'Agente': 210000,
  'Agente II': 220000,
  'Agente Capo': 230000,
  'Detective': 240000,
  'Sergente': 250000,
  'Detective II': 260000,
  'Sergente II': 270000,
  'Detective Capo': 280000,
  'Sergente Capo': 290000,
  'Sottotenenete': 300000,
  'Tenente': 315000,
  'Tenente Capo': 330000,
  'Vice Capitano': 345000,
  'Capitano': 360000,
  'Vice Ispettore': 380000,
  'Ispettore': 400000,
  'Ispettore Capo': 420000,
  'Supervisore Generale': 440000;
  'Vice Comandante': 460000,
  'Comandante': 480000,
  'Vice Direttore': 500000,
  'Direttore': 550000
};

const stipendiSegretariSecret = {
  'Consigliere Di Stato': 600000,
  'Segretario di Stato': 650000,
  'Segretario Degli Interni': 550000,
  'Segretario Della Difesa': 550000,
  'Segretario delle Finanze': 550000,
  'Vice Segretario Degli Interni': 450000,
  'Vice Segrerario Della Difesa': 450000,
  'Vice Segretario Delle Finanze': 450000,
  'Assistente Operativo Difesa': 350000,
};

const segretariSecret = Object.keys(stipendiSegretariSecret);

// ================== FUNZIONI ==================
function selezionaRamo() {
  const ramo = document.getElementById('ramo').value;
  const container = document.getElementById('passaggi');
  container.innerHTML = '';
  container.style.display = 'block';

  if (ramo === 'giurisprudenza') {
    creaSelect(container, 'grado', Object.keys(stipendiGiurisprudenza), 'Seleziona grado');
    container.innerHTML += '<div id="extraGiurisprudenza"></div>';
    container.innerHTML += '<button onclick="calcolaGiurisprudenza()">Calcola Stipendio</button>';
    document.getElementById('grado').addEventListener('change', aggiornaExtraGiurisprudenza);
  }

  if (ramo === 'secret') {
    creaSelect(container, 'gradoSecret', Object.keys(stipendiSecret), 'Seleziona grado Secret');
    container.innerHTML += '<label>Ãˆ sottosegretario o segretario?</label><select id="sottosegretario"><option value="no">No</option><option value="si">Si</option></select>';
    container.innerHTML += '<div id="menuSottosegretari" style="display:none;"></div>';
    container.innerHTML += '<div id="extraSecret"></div>';
    container.innerHTML += '<button onclick="calcolaSecret()">Calcola Stipendio</button>';
    document.getElementById('sottosegretario').addEventListener('change', mostraMenuSottosegretari);
    document.getElementById('gradoSecret').addEventListener('change', aggiornaExtraSecret);
  }
}

function creaSelect(container, id, options, label) {
  container.innerHTML += `<label>${label}</label>`;
  let selectHTML = `<select id='${id}'><option value=''>-- Scegli --</option>`;
  options.forEach(opt => selectHTML += `<option value='${opt}'>${opt}</option>`);
  selectHTML += '</select>';
  container.innerHTML += selectHTML;
}

function aggiornaExtraGiurisprudenza() {
  const grado = document.getElementById('grado').value;
  const div = document.getElementById('extraGiurisprudenza');
  div.innerHTML = '';
  if (grado) {
    div.innerHTML += '<label>Fatturato totale:</label><input type="number" id="fatturato" placeholder="Es: 50000" />';
    div.innerHTML += '<label>Idoneo al bonus grado?</label><select id="bonusGrado"><option value="no">No</option><option value="si">Si</option></select>';
    aggiungiBonus(div, 'bonus_');
  }
}


function aggiornaExtraSecret() {
  const grado = document.getElementById('gradoSecret').value;
  const div = document.getElementById('extraSecret');
  div.innerHTML = '';
  if (grado) {
    aggiungiBonus(div, 'bonusS_');
  }
}

function mostraMenuSottosegretari() {
  const div = document.getElementById('menuSottosegretari');
  if (document.getElementById('sottosegretario').value === 'si') {
    div.innerHTML = '';
    creaSelect(div, 'gradoSottosegretario', segretariSecret, 'Seleziona Segretario/Sottosegretario');
    div.innerHTML += '<label>Fatturato totale:</label><input type="number" id="fatturatoSecret" placeholder="Es: 50000" />';
    div.style.display = 'block';
  } else {
    div.style.display = 'none';
    div.innerHTML = '';
  }
}

function aggiungiBonus(div, prefix) {
  div.innerHTML += '<label>Bonus Vari:</label><div class="bonus-grid">';
  for (const bonus in bonusVari) {
    div.innerHTML += `<div class='bonus-item' id='${prefix}${bonus}' onclick="toggleBonus('${prefix}${bonus}')">${bonus}</div>`;
  }
  div.innerHTML += '</div>';
}

function toggleBonus(id) { document.getElementById(id).classList.toggle('active'); }
function isBonusActive(id) { return document.getElementById(id)?.classList.contains('active'); }

function calcolaGiurisprudenza() {
  const grado = document.getElementById('grado').value;
  const bonusGrado = document.getElementById('bonusGrado').value === 'si';
  let totale = stipendiGiurisprudenza[grado] || 0; // stipendio base

  const fatturato = parseFloat(document.getElementById('fatturato')?.value) || 0;
  totale += fatturato; 

  for (const bonus in bonusVari) {
    if (isBonusActive(`bonus_${bonus}`)) totale += bonusVari[bonus];
  }


  totale += getBonusCustom('bonus_');

  if (!bonusGrado) {
    totale = fatturato;
    for (const bonus in bonusVari) {
      if (isBonusActive(`bonus_${bonus}`)) totale += bonusVari[bonus];
    }
    
    totale += getBonusCustom('bonus_');
  }

  mostraRisultato(totale);
}
  
function aggiungiBonus(div, prefix) {
  div.innerHTML += '<label>Bonus Vari:</label><div class="bonus-grid">';
  for (const bonus in bonusVari) {
    div.innerHTML += `<div class='bonus-item' id='${prefix}${bonus}' onclick="toggleBonus('${prefix}${bonus}')">${bonus}</div>`;
  }
  div.innerHTML += '</div>';

  
  div.innerHTML += `
    <label>Bonus Custom:</label>
    <input type="range" id="${prefix}bonusCustom" min="0" max="1000000" step="50000" value="0" oninput="aggiornaCustom('${prefix}')">
    <div style="text-align:center; margin-top:0.5rem;">Valore: <span id="${prefix}bonusCustomVal">0</span>$</div>
  `;
}

function aggiornaCustom(prefix) {
  let val = document.getElementById(`${prefix}bonusCustom`).value;
  document.getElementById(`${prefix}bonusCustomVal`).innerText = parseInt(val).toLocaleString('it-IT');
}

function getBonusCustom(prefix) {
  return parseInt(document.getElementById(`${prefix}bonusCustom`)?.value || 0);
}



function calcolaSecret() {
  const grado = document.getElementById('gradoSecret').value;
  const sottosegretario = document.getElementById('sottosegretario').value === 'si';
  let totale = 0;

  if (sottosegretario) {
    let gradoSS = document.getElementById('gradoSottosegretario').value;

    if (stipendiSegretariSecret.hasOwnProperty(gradoSS)) {
      totale = stipendiSegretariSecret[gradoSS];
    } else if (stipendiGiurisprudenza.hasOwnProperty(gradoSS)) {
      totale = stipendiGiurisprudenza[gradoSS];
    } else {
      totale = 0;
    }

    if (stipendiSecret.hasOwnProperty(grado)) {
      totale += (stipendiSecret[grado] * 0.5);
    }

    let fatturato = parseFloat(document.getElementById('fatturatoSecret').value) || 0;
    totale += fatturato;

    for (const bonus in bonusVari) { 
      if (isBonusActive(`bonusS_${bonus}`)) totale += bonusVari[bonus]; 
    }

    totale += getBonusCustom('bonusS_');

  } else {
    totale = stipendiSecret[grado] || 0;

    for (const bonus in bonusVari) { 
      if (isBonusActive(`bonusS_${bonus}`)) totale += bonusVari[bonus]; 
    }

    totale += getBonusCustom('bonusS_');
  }

  mostraRisultato(totale);
}

function mostraRisultato(totale) {
  const div = document.getElementById('result');
  div.style.display = 'block';
  document.getElementById('stipendioTotale').innerText = totale.toLocaleString('it-IT');
}

</script></div>
</body>
</html>
